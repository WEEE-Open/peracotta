#!/usr/bin/env python3

from read_smartctl import read_smartctl
from read_decode_dimms import read_decode_dimms
from read_dmidecode import get_baseboard, get_chassis, get_connectors
from read_lspci_and_glxinfo import read_lspci_and_glxinfo
from read_lscpu import read_lscpu

filedir = 'Thinkpad-R500/'


def test_lspci():
	expect = {
		"type": "graphics-card",
		"brand": "Lenovo",
		"model": "Mobile 4 Series Chipset",
		"internal-name": "",
		"capacity-byte": None,
		"human_readable_capacity": "",
		"brand-manufacturer": "Intel"
	}
	output = read_lspci_and_glxinfo(False, filedir + 'lspci.txt', filedir + 'glxinfo.txt')

	assert expect == output


def test_lscpu():
	expect = {
		"type": "cpu",
		"isa": "x86-64",
		"model": "Core 2 Duo P8600",
		"brand": "Intel",
		"core-n": 2,
		"thread-n": 2,
		"frequency-hertz": 2400000000,
		"human_readable_frequency": "N/A"
	}
	output = read_lscpu(filedir + 'lscpu.txt')

	assert expect == output


def test_ram():
	output = read_decode_dimms(filedir + 'dimms.txt')

	assert len(output) == 0


def test_baseboard():
	expect = {
		"type": "motherboard",
		"brand": "LENOVO",
		"model": "2718V8C",
		"sn": "VQ1FF05G1WA",
	}
	output = get_baseboard(filedir + 'baseboard.txt')

	assert expect == output


def test_connector():
	baseboard = get_baseboard(filedir + 'baseboard.txt')

	expect = {
		"type": "motherboard",
		"brand": "LENOVO",
		"model": "2718V8C",
		"sn": "VQ1FF05G1WA",
		"usb-ports-n": 3,
		"vga-ports-n": 1,
		"mini-jack-ports-n": 2,
		"ethernet-ports-n": 1,
		"firewire-ports-n": 1,
		"rj11-ports-n": 1,
		"notes": ""
	}
	output = get_connectors(filedir + 'connector.txt', baseboard)

	assert expect == output


def test_chassis():
	expect = {
		"type": "case",
		"brand": "LENOVO",
		"model": "",
		"sn": "Not Available",
		"motherboard-form-factor": "proprietary-laptop"
	}
	output = get_chassis(filedir + 'chassis.txt')

	assert expect == output


def test_smartctl():
	expect = [
		{
			"type": "hdd",
			"brand": "Fujitsu",
			"model": "MJA2160BH G2",
			"family": "MJA BH",
			"wwn": "5 00000e 0447dfa8d",
			"sn": "K95BTA42BD8H",
			"capacity-decibyte": 160000000000,
			"human_readable_capacity": "160 GB",
			"spin-rate-rpm": 5400,
			"human_readable_smart_data": "=== START OF READ SMART DATA SECTION ===\nSMART overall-health self-assessment test result: PASSED\n\nGeneral SMART Values:\nOffline data collection status:  (0x00)\tOffline data collection activity\n\t\t\t\t\twas never started.\n\t\t\t\t\tAuto Offline Data Collection: Disabled.\nSelf-test execution status:      (   0)\tThe previous self-test routine completed\n\t\t\t\t\twithout error or no self-test has ever \n\t\t\t\t\tbeen run.\nTotal time to complete Offline \ndata collection: \t\t(  508) seconds.\nOffline data collection\ncapabilities: \t\t\t (0x7b) SMART execute Offline immediate.\n\t\t\t\t\tAuto Offline data collection on/off support.\n\t\t\t\t\tSuspend Offline collection upon new\n\t\t\t\t\tcommand.\n\t\t\t\t\tOffline surface scan supported.\n\t\t\t\t\tSelf-test supported.\n\t\t\t\t\tConveyance Self-test supported.\n\t\t\t\t\tSelective Self-test supported.\nSMART capabilities:            (0x0003)\tSaves SMART data before entering\n\t\t\t\t\tpower-saving mode.\n\t\t\t\t\tSupports SMART auto save timer.\nError logging capability:        (0x01)\tError logging supported.\n\t\t\t\t\tGeneral Purpose Logging supported.\nShort self-test routine \nrecommended polling time: \t (   2) minutes.\nExtended self-test routine\nrecommended polling time: \t (  72) minutes.\nConveyance self-test routine\nrecommended polling time: \t (   2) minutes.\nSCT capabilities: \t       (0x003d)\tSCT Status supported.\n\t\t\t\t\tSCT Error Recovery Control supported.\n\t\t\t\t\tSCT Feature Control supported.\n\t\t\t\t\tSCT Data Table supported.\n\nSMART Attributes Data Structure revision number: 16\nVendor Specific SMART Attributes with Thresholds:\nID# ATTRIBUTE_NAME          FLAGS    VALUE WORST THRESH FAIL RAW_VALUE\n  1 Raw_Read_Error_Rate     POSR--   100   100   046    -    50270\n  2 Throughput_Performance  P-S---   100   100   030    -    25231360\n  3 Spin_Up_Time            PO----   100   100   025    -    0\n  4 Start_Stop_Count        -O--CK   099   099   000    -    3215\n  5 Reallocated_Sector_Ct   PO--CK   100   100   024    -    0 (2100 0)\n  7 Seek_Error_Rate         POSR--   100   100   047    -    1565\n  8 Seek_Time_Performance   P-S---   100   100   019    -    0\n  9 Power_On_Hours          -O--CK   088   088   000    -    6251\n 10 Spin_Retry_Count        PO--C-   100   100   020    -    0\n 12 Power_Cycle_Count       -O--CK   100   100   000    -    3007\n192 Power-Off_Retract_Count -O--CK   100   100   000    -    85\n193 Load_Cycle_Count        -O--CK   100   100   000    -    19460\n194 Temperature_Celsius     -O---K   100   100   000    -    33 (Min/Max 9/45)\n195 Hardware_ECC_Recovered  -O-RC-   100   100   000    -    185\n196 Reallocated_Event_Count -O--CK   100   100   000    -    0 (0 15680)\n197 Current_Pending_Sector  -O--C-   100   100   000    -    0\n198 Offline_Uncorrectable   ----C-   100   100   000    -    0\n199 UDMA_CRC_Error_Count    -OSRCK   200   253   000    -    1\n200 Multi_Zone_Error_Rate   POSR--   100   100   060    -    15690\n203 Run_Out_Cancel          -O----   100   100   000    -    1529060392964\n240 Head_Flying_Hours       -OSRCK   200   200   000    -    0\n                            ||||||_ K auto-keep\n                            |||||__ C event count\n                            ||||___ R error rate\n                            |||____ S speed/performance\n                            ||_____ O updated online\n                            |______ P prefailure warning\n\nGeneral Purpose Log Directory Version 1\nSMART           Log Directory Version 1 [multi-sector log support]\nAddress    Access  R/W   Size  Description\n0x00       GPL,SL  R/O      1  Log Directory\n0x01       GPL,SL  R/O      1  Summary SMART error log\n0x02       GPL,SL  R/O     51  Comprehensive SMART error log\n0x03       GPL,SL  R/O     64  Ext. Comprehensive SMART error log\n0x06       GPL,SL  R/O      1  SMART self-test log\n0x07       GPL,SL  R/O      2  Extended self-test log\n0x09       GPL,SL  R/W      1  Selective self-test log\n0x10       GPL,SL  R/O      1  SATA NCQ Queued Error log\n0x11       GPL,SL  R/O      1  SATA Phy Event Counters log\n0x23       GPL,SL  R/O      1  Delayed sector log [OBS-8]\n0x80-0x9f  GPL,SL  R/W     16  Host vendor specific log\n0xa1       GPL,SL  VS       1  Device vendor specific log\n\nSMART Extended Comprehensive Error Log Version: 1 (64 sectors)\nDevice Error Count: 1\n\tCR     = Command Register\n\tFEATR  = Features Register\n\tCOUNT  = Count (was: Sector Count) Register\n\tLBA_48 = Upper bytes of LBA High/Mid/Low Registers ]  ATA-8\n\tLH     = LBA High (was: Cylinder High) Register    ]   LBA\n\tLM     = LBA Mid (was: Cylinder Low) Register      ] Register\n\tLL     = LBA Low (was: Sector Number) Register     ]\n\tDV     = Device (was: Device/Head) Register\n\tDC     = Device Control Register\n\tER     = Error register\n\tST     = Status register\nPowered_Up_Time is measured from power on, and printed as\nDDd+hh:mm:SS.sss where DD=days, hh=hours, mm=minutes,\nSS=sec, and sss=millisec. It \"wraps\" after 49.710 days.\n\nError 1 [0] occurred at disk power-on lifetime: 2725 hours (113 days + 13 hours)\n  When the command that caused the error occurred, the device was active or idle.\n\n  After command completion occurred, registers were:\n  ER -- ST COUNT  LBA_48  LH LM LL DV DC\n  -- -- -- == -- == == == -- -- -- -- --\n  84 -- 51 00 00 00 00 00 60 30 e7 40 00  Error: ICRC, ABRT at LBA = 0x006030e7 = 6303975\n\n  Commands leading to the command that caused the error were:\n  CR FEATR COUNT  LBA_48  LH LM LL DV DC  Powered_Up_Time  Command/Feature_Name\n  -- == -- == -- == == == -- -- -- -- --  ---------------  --------------------\n  c8 00 00 00 08 00 00 00 60 30 e0 40 00     00:00:07.853  READ DMA\n  c8 00 00 00 08 00 00 00 60 30 d8 40 00     00:00:07.853  READ DMA\n  c8 00 00 00 08 00 00 00 60 30 d0 40 00     00:00:07.852  READ DMA\n  c8 00 00 00 08 00 00 00 60 30 c8 40 00     00:00:07.852  READ DMA\n  c8 00 00 00 08 00 00 00 60 30 c0 40 00     00:00:07.852  READ DMA\n\nSMART Extended Self-test Log Version: 1 (2 sectors)\nNum  Test_Description    Status                  Remaining  LifeTime(hours)  LBA_of_first_error\n# 1  Short offline       Completed without error       00%       488         -\n# 2  Vendor (0x50)       Completed without error       00%         0         -\n\nSMART Selective self-test log data structure revision number 1\n SPAN  MIN_LBA  MAX_LBA  CURRENT_TEST_STATUS\n    1        0        0  Not_testing\n    2        0        0  Not_testing\n    3        0        0  Not_testing\n    4        0        0  Not_testing\n    5        0        0  Not_testing\nSelective self-test flags (0x0):\n  After scanning selected spans, do NOT read-scan remainder of disk.\nIf Selective self-test is pending on power-up, resume after 0 minute delay.\n\nSCT Status Version:                  2\nSCT Version (vendor specific):       0 (0x0000)\nSCT Support Level:                   1\nDevice State:                        Active (0)\nCurrent Temperature:                    33 Celsius\nPower Cycle Min/Max Temperature:     32/33 Celsius\nLifetime    Min/Max Temperature:      9/45 Celsius\nUnder/Over Temperature Limit Count:   0/0\n\nSCT Temperature History Version:     2\nTemperature Sampling Period:         1 minute\nTemperature Logging Interval:        1 minute\nMin/Max recommended Temperature:      5/60 Celsius\nMin/Max Temperature Limit:           -40/65 Celsius\nTemperature History Size (Index):    478 (118)\n\nIndex    Estimated Time   Temperature Celsius\n 119    2019-05-02 11:51    36  *****************\n 120    2019-05-02 11:52    35  ****************\n ...    ..(  2 skipped).    ..  ****************\n 123    2019-05-02 11:55    35  ****************\n 124    2019-05-02 11:56    34  ***************\n 125    2019-05-02 11:57     ?  -\n 126    2019-05-02 11:58    33  **************\n ...    ..(  8 skipped).    ..  **************\n 135    2019-05-02 12:07    33  **************\n 136    2019-05-02 12:08    32  *************\n ...    ..(  7 skipped).    ..  *************\n 144    2019-05-02 12:16    32  *************\n 145    2019-05-02 12:17     ?  -\n 146    2019-05-02 12:18    32  *************\n ...    ..( 10 skipped).    ..  *************\n 157    2019-05-02 12:29    32  *************\n 158    2019-05-02 12:30     ?  -\n 159    2019-05-02 12:31    32  *************\n 160    2019-05-02 12:32    32  *************\n 161    2019-05-02 12:33     ?  -\n 162    2019-05-02 12:34    31  ************\n ...    ..(  2 skipped).    ..  ************\n 165    2019-05-02 12:37    31  ************\n 166    2019-05-02 12:38     ?  -\n 167    2019-05-02 12:39    31  ************\n 168    2019-05-02 12:40     ?  -\n 169    2019-05-02 12:41    31  ************\n ...    ..(  5 skipped).    ..  ************\n 175    2019-05-02 12:47    31  ************\n 176    2019-05-02 12:48     ?  -\n 177    2019-05-02 12:49    31  ************\n 178    2019-05-02 12:50     ?  -\n 179    2019-05-02 12:51    30  ***********\n 180    2019-05-02 12:52    31  ************\n 181    2019-05-02 12:53     ?  -\n 182    2019-05-02 12:54    31  ************\n ...    ..(  3 skipped).    ..  ************\n 186    2019-05-02 12:58    31  ************\n 187    2019-05-02 12:59     ?  -\n 188    2019-05-02 13:00    31  ************\n 189    2019-05-02 13:01     ?  -\n 190    2019-05-02 13:02    31  ************\n ...    ..(  5 skipped).    ..  ************\n 196    2019-05-02 13:08    31  ************\n 197    2019-05-02 13:09     ?  -\n 198    2019-05-02 13:10    31  ************\n 199    2019-05-02 13:11    31  ************\n 200    2019-05-02 13:12     ?  -\n 201    2019-05-02 13:13    31  ************\n ...    ..(  2 skipped).    ..  ************\n 204    2019-05-02 13:16    31  ************\n 205    2019-05-02 13:17     ?  -\n 206    2019-05-02 13:18    31  ************\n 207    2019-05-02 13:19    31  ************\n 208    2019-05-02 13:20     ?  -\n 209    2019-05-02 13:21    31  ************\n 210    2019-05-02 13:22     ?  -\n 211    2019-05-02 13:23    31  ************\n 212    2019-05-02 13:24     ?  -\n 213    2019-05-02 13:25    31  ************\n 214    2019-05-02 13:26    30  ***********\n 215    2019-05-02 13:27    31  ************\n 216    2019-05-02 13:28    30  ***********\n 217    2019-05-02 13:29    31  ************\n 218    2019-05-02 13:30    31  ************\n 219    2019-05-02 13:31    31  ************\n 220    2019-05-02 13:32     ?  -\n 221    2019-05-02 13:33    31  ************\n 222    2019-05-02 13:34    30  ***********\n 223    2019-05-02 13:35     ?  -\n 224    2019-05-02 13:36    30  ***********\n 225    2019-05-02 13:37     ?  -\n 226    2019-05-02 13:38    30  ***********\n 227    2019-05-02 13:39    30  ***********\n 228    2019-05-02 13:40     ?  -\n 229    2019-05-02 13:41    30  ***********\n 230    2019-05-02 13:42    30  ***********\n 231    2019-05-02 13:43    30  ***********\n 232    2019-05-02 13:44    31  ************\n 233    2019-05-02 13:45     ?  -\n 234    2019-05-02 13:46    31  ************\n 235    2019-05-02 13:47     ?  -\n 236    2019-05-02 13:48    30  ***********\n 237    2019-05-02 13:49    30  ***********\n 238    2019-05-02 13:50    31  ************\n 239    2019-05-02 13:51    31  ************\n 240    2019-05-02 13:52     ?  -\n 241    2019-05-02 13:53    30  ***********\n 242    2019-05-02 13:54    30  ***********\n 243    2019-05-02 13:55    31  ************\n 244    2019-05-02 13:56    30  ***********\n 245    2019-05-02 13:57    31  ************\n ...    ..(  7 skipped).    ..  ************\n 253    2019-05-02 14:05    31  ************\n 254    2019-05-02 14:06     ?  -\n 255    2019-05-02 14:07    31  ************\n 256    2019-05-02 14:08    31  ************\n 257    2019-05-02 14:09     ?  -\n 258    2019-05-02 14:10    31  ************\n 259    2019-05-02 14:11    31  ************\n 260    2019-05-02 14:12    30  ***********\n ...    ..(  7 skipped).    ..  ***********\n 268    2019-05-02 14:20    30  ***********\n 269    2019-05-02 14:21     ?  -\n 270    2019-05-02 14:22    30  ***********\n 271    2019-05-02 14:23    30  ***********\n 272    2019-05-02 14:24     ?  -\n 273    2019-05-02 14:25    30  ***********\n ...    ..(  2 skipped).    ..  ***********\n 276    2019-05-02 14:28    30  ***********\n 277    2019-05-02 14:29     ?  -\n 278    2019-05-02 14:30    30  ***********\n 279    2019-05-02 14:31    30  ***********\n 280    2019-05-02 14:32     ?  -\n 281    2019-05-02 14:33    30  ***********\n ...    ..(  2 skipped).    ..  ***********\n 284    2019-05-02 14:36    30  ***********\n 285    2019-05-02 14:37     ?  -\n 286    2019-05-02 14:38    30  ***********\n 287    2019-05-02 14:39    30  ***********\n 288    2019-05-02 14:40     ?  -\n 289    2019-05-02 14:41    30  ***********\n 290    2019-05-02 14:42     ?  -\n 291    2019-05-02 14:43    30  ***********\n ...    ..(  4 skipped).    ..  ***********\n 296    2019-05-02 14:48    30  ***********\n 297    2019-05-02 14:49     ?  -\n 298    2019-05-02 14:50    30  ***********\n 299    2019-05-02 14:51     ?  -\n 300    2019-05-02 14:52    30  ***********\n 301    2019-05-02 14:53     ?  -\n 302    2019-05-02 14:54    30  ***********\n 303    2019-05-02 14:55    30  ***********\n 304    2019-05-02 14:56     ?  -\n 305    2019-05-02 14:57    30  ***********\n 306    2019-05-02 14:58    30  ***********\n 307    2019-05-02 14:59    30  ***********\n 308    2019-05-02 15:00     ?  -\n 309    2019-05-02 15:01    30  ***********\n 310    2019-05-02 15:02    30  ***********\n 311    2019-05-02 15:03     ?  -\n 312    2019-05-02 15:04    30  ***********\n 313    2019-05-02 15:05    30  ***********\n 314    2019-05-02 15:06     ?  -\n 315    2019-05-02 15:07    30  ***********\n ...    ..(  2 skipped).    ..  ***********\n 318    2019-05-02 15:10    30  ***********\n 319    2019-05-02 15:11     ?  -\n 320    2019-05-02 15:12    30  ***********\n 321    2019-05-02 15:13    30  ***********\n 322    2019-05-02 15:14    30  ***********\n 323    2019-05-02 15:15     ?  -\n 324    2019-05-02 15:16    30  ***********\n 325    2019-05-02 15:17     ?  -\n 326    2019-05-02 15:18    29  **********\n 327    2019-05-02 15:19     ?  -\n 328    2019-05-02 15:20    29  **********\n 329    2019-05-02 15:21    30  ***********\n 330    2019-05-02 15:22    30  ***********\n 331    2019-05-02 15:23     ?  -\n 332    2019-05-02 15:24    30  ***********\n ...    ..( 10 skipped).    ..  ***********\n 343    2019-05-02 15:35    30  ***********\n 344    2019-05-02 15:36     ?  -\n 345    2019-05-02 15:37    30  ***********\n ...    ..(  4 skipped).    ..  ***********\n 350    2019-05-02 15:42    30  ***********\n 351    2019-05-02 15:43     ?  -\n 352    2019-05-02 15:44    30  ***********\n ...    ..(  8 skipped).    ..  ***********\n 361    2019-05-02 15:53    30  ***********\n 362    2019-05-02 15:54    31  ************\n 363    2019-05-02 15:55     ?  -\n 364    2019-05-02 15:56    30  ***********\n 365    2019-05-02 15:57    30  ***********\n 366    2019-05-02 15:58    31  ************\n ...    ..(  2 skipped).    ..  ************\n 369    2019-05-02 16:01    31  ************\n 370    2019-05-02 16:02    30  ***********\n 371    2019-05-02 16:03    30  ***********\n 372    2019-05-02 16:04    30  ***********\n 373    2019-05-02 16:05     ?  -\n 374    2019-05-02 16:06    30  ***********\n 375    2019-05-02 16:07    30  ***********\n 376    2019-05-02 16:08     ?  -\n 377    2019-05-02 16:09    30  ***********\n ...    ..(  2 skipped).    ..  ***********\n 380    2019-05-02 16:12    30  ***********\n 381    2019-05-02 16:13     ?  -\n 382    2019-05-02 16:14    30  ***********\n 383    2019-05-02 16:15     ?  -\n 384    2019-05-02 16:16    30  ***********\n 385    2019-05-02 16:17     ?  -\n 386    2019-05-02 16:18    30  ***********\n ...    ..(  4 skipped).    ..  ***********\n 391    2019-05-02 16:23    30  ***********\n 392    2019-05-02 16:24     ?  -\n 393    2019-05-02 16:25    30  ***********\n 394    2019-05-02 16:26    30  ***********\n 395    2019-05-02 16:27     ?  -\n 396    2019-05-02 16:28    30  ***********\n ...    ..(  4 skipped).    ..  ***********\n 401    2019-05-02 16:33    30  ***********\n 402    2019-05-02 16:34     ?  -\n 403    2019-05-02 16:35    30  ***********\n 404    2019-05-02 16:36    30  ***********\n 405    2019-05-02 16:37     ?  -\n 406    2019-05-02 16:38    30  ***********\n ...    ..(  4 skipped).    ..  ***********\n 411    2019-05-02 16:43    30  ***********\n 412    2019-05-02 16:44     ?  -\n 413    2019-05-02 16:45    25  ******\n 414    2019-05-02 16:46     ?  -\n 415    2019-05-02 16:47    24  *****\n 416    2019-05-02 16:48     ?  -\n 417    2019-05-02 16:49    25  ******\n 418    2019-05-02 16:50     ?  -\n 419    2019-05-02 16:51    25  ******\n 420    2019-05-02 16:52     ?  -\n 421    2019-05-02 16:53    26  *******\n 422    2019-05-02 16:54     ?  -\n 423    2019-05-02 16:55    29  **********\n 424    2019-05-02 16:56    29  **********\n 425    2019-05-02 16:57    30  ***********\n 426    2019-05-02 16:58    30  ***********\n 427    2019-05-02 16:59    31  ************\n 428    2019-05-02 17:00     ?  -\n 429    2019-05-02 17:01    31  ************\n 430    2019-05-02 17:02     ?  -\n 431    2019-05-02 17:03    35  ****************\n 432    2019-05-02 17:04    34  ***************\n 433    2019-05-02 17:05    35  ****************\n 434    2019-05-02 17:06    35  ****************\n 435    2019-05-02 17:07    35  ****************\n 436    2019-05-02 17:08    36  *****************\n 437    2019-05-02 17:09    35  ****************\n 438    2019-05-02 17:10    36  *****************\n 439    2019-05-02 17:11    36  *****************\n 440    2019-05-02 17:12    37  ******************\n ...    ..( 14 skipped).    ..  ******************\n 455    2019-05-02 17:27    37  ******************\n 456    2019-05-02 17:28     ?  -\n 457    2019-05-02 17:29    33  **************\n ...    ..(  6 skipped).    ..  **************\n 464    2019-05-02 17:36    33  **************\n 465    2019-05-02 17:37     ?  -\n 466    2019-05-02 17:38    24  *****\n 467    2019-05-02 17:39    24  *****\n 468    2019-05-02 17:40    25  ******\n 469    2019-05-02 17:41    26  *******\n 470    2019-05-02 17:42    26  *******\n 471    2019-05-02 17:43    27  ********\n 472    2019-05-02 17:44    27  ********\n 473    2019-05-02 17:45    28  *********\n 474    2019-05-02 17:46    28  *********\n 475    2019-05-02 17:47    28  *********\n 476    2019-05-02 17:48    29  **********\n 477    2019-05-02 17:49    29  **********\n   0    2019-05-02 17:50    30  ***********\n   1    2019-05-02 17:51    30  ***********\n   2    2019-05-02 17:52    32  *************\n   3    2019-05-02 17:53    32  *************\n   4    2019-05-02 17:54    32  *************\n   5    2019-05-02 17:55    33  **************\n ...    ..(  7 skipped).    ..  **************\n  13    2019-05-02 18:03    33  **************\n  14    2019-05-02 18:04    34  ***************\n ...    ..(  2 skipped).    ..  ***************\n  17    2019-05-02 18:07    34  ***************\n  18    2019-05-02 18:08     ?  -\n  19    2019-05-02 18:09    25  ******\n  20    2019-05-02 18:10    26  *******\n  21    2019-05-02 18:11    27  ********\n  22    2019-05-02 18:12    28  *********\n  23    2019-05-02 18:13    29  **********\n  24    2019-05-02 18:14    30  ***********\n  25    2019-05-02 18:15    30  ***********\n  26    2019-05-02 18:16    30  ***********\n  27    2019-05-02 18:17    31  ************\n  28    2019-05-02 18:18    31  ************\n  29    2019-05-02 18:19    32  *************\n  30    2019-05-02 18:20    33  **************\n ...    ..(  2 skipped).    ..  **************\n  33    2019-05-02 18:23    33  **************\n  34    2019-05-02 18:24    34  ***************\n  35    2019-05-02 18:25    33  **************\n  36    2019-05-02 18:26    34  ***************\n ...    ..(  6 skipped).    ..  ***************\n  43    2019-05-02 18:33    34  ***************\n  44    2019-05-02 18:34    35  ****************\n  45    2019-05-02 18:35    34  ***************\n  46    2019-05-02 18:36    34  ***************\n  47    2019-05-02 18:37    34  ***************\n  48    2019-05-02 18:38    33  **************\n ...    ..( 11 skipped).    ..  **************\n  60    2019-05-02 18:50    33  **************\n  61    2019-05-02 18:51    34  ***************\n  62    2019-05-02 18:52    34  ***************\n  63    2019-05-02 18:53    33  **************\n  64    2019-05-02 18:54    33  **************\n  65    2019-05-02 18:55    34  ***************\n  66    2019-05-02 18:56    33  **************\n ...    ..( 11 skipped).    ..  **************\n  78    2019-05-02 19:08    33  **************\n  79    2019-05-02 19:09     ?  -\n  80    2019-05-02 19:10    22  ***\n  81    2019-05-02 19:11    22  ***\n  82    2019-05-02 19:12    23  ****\n  83    2019-05-02 19:13    24  *****\n  84    2019-05-02 19:14    26  *******\n  85    2019-05-02 19:15    26  *******\n  86    2019-05-02 19:16    27  ********\n  87    2019-05-02 19:17    27  ********\n  88    2019-05-02 19:18    28  *********\n  89    2019-05-02 19:19    28  *********\n  90    2019-05-02 19:20    28  *********\n  91    2019-05-02 19:21    29  **********\n  92    2019-05-02 19:22    29  **********\n  93    2019-05-02 19:23    30  ***********\n  94    2019-05-02 19:24    30  ***********\n  95    2019-05-02 19:25    30  ***********\n  96    2019-05-02 19:26    31  ************\n  97    2019-05-02 19:27    31  ************\n  98    2019-05-02 19:28    32  *************\n ...    ..(  2 skipped).    ..  *************\n 101    2019-05-02 19:31    32  *************\n 102    2019-05-02 19:32    33  **************\n ...    ..(  2 skipped).    ..  **************\n 105    2019-05-02 19:35    33  **************\n 106    2019-05-02 19:36     ?  -\n 107    2019-05-02 19:37    33  **************\n 108    2019-05-02 19:38     ?  -\n 109    2019-05-02 19:39    33  **************\n 110    2019-05-02 19:40     ?  -\n 111    2019-05-02 19:41    32  *************\n 112    2019-05-02 19:42    32  *************\n 113    2019-05-02 19:43     ?  -\n 114    2019-05-02 19:44    33  **************\n 115    2019-05-02 19:45    33  **************\n 116    2019-05-02 19:46     ?  -\n 117    2019-05-02 19:47    33  **************\n 118    2019-05-02 19:48    33  **************\n\nSCT Error Recovery Control:\n           Read: Disabled\n          Write: Disabled\n\nDevice Statistics (GP/SMART Log 0x04) not supported\n\nSATA Phy Event Counters (GP Log 0x11)\nID      Size     Value  Description\n0x0001  4            0  Command failed due to ICRC error\n0x0002  4            0  R_ERR response for data FIS\n0x0003  4            0  R_ERR response for device-to-host data FIS\n0x0004  4            0  R_ERR response for host-to-device data FIS\n0x0005  4            0  R_ERR response for non-data FIS\n0x0006  4            0  R_ERR response for device-to-host non-data FIS\n0x0008  4            0  Device-to-host non-data FIS retries\n0x0009  4          116  Transition from drive PhyRdy to drive PhyNRdy\n0x000a  4            2  Device-to-host register FISes sent due to a COMRESET\n0x000b  4            0  CRC errors within host-to-device FIS\n0x000d  4            0  Non-CRC errors within host-to-device FIS\n0x000f  4            0  R_ERR response for host-to-device data FIS, CRC\n0x0010  4            0  R_ERR response for host-to-device data FIS, non-CRC\n\n",
			"hdd-form-factor": "2.5-7mm"
		}
	]
	output = read_smartctl(filedir)

	assert expect == output
